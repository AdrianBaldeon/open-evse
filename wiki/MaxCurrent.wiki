#summary How to change the EVSE Current.
#labels Featured

= Introduction =

There are many ways to change the maximum current offered to the Electric Vehicle, such as serial, USB, Bluetooth, buttons or analog trim pot. This setting is stored in the EVSE as a variable. 

{{{
// current capacity in amps  
#define CURRENT_CAPACITY_L1 12  
#define CURRENT_CAPACITY_L2 30    

// minimum allowable current in amps  
#define MIN_CURRENT_CAPACITY 6    

// maximum allowable current in amps  
#define MAX_CURRENT_CAPACITY_L1 20  
#define MAX_CURRENT_CAPACITY_L2 30  
}}}

The CURRENT_CAPACITY sets the default current, setting can be modified when the firmware is loaded or by changing the variable with the FTDI serial port. FTDI to USB or FTDI to Bluetooth adapters are avaliable from Sparkfun.

=Hardware=

Open EVSE supports serial communication via TTL serial and i2c, the board breaks out serial and power in the common "FTDI" format. FTDI devices are compatible with Open EVSE. An example of a Bluetooth and USB device are listed below, both have been successfuly tested with Open EVSE.

http://www.sparkfun.com/products/10393

http://dlnmh9ip6v2uc.cloudfront.net/images/products/10393-01b.jpg

http://www.sparkfun.com/products/9718

http://dlnmh9ip6v2uc.cloudfront.net/images/products/09717-01.jpg


= Examples =
Note: Examples are from older EVSE code, they will need to be updated to work with the current Open EVSE code.

== Buttons ==

{{{
#define BTN_amp 3   // button is on digital 3
int buttonState = LOW;   
int buttonlastState = LOW;       
 

void loop() 
{
    buttonState=digitalRead(BTN_amp);   // read button state


  if (buttonState==HIGH && buttonlastState==LOW){amp++; // if reeding is high add 1 to the current setting
  }
if (amp > 7) { //is current setting is higher than 7 go back to 1
         amp = 1;
  buttonlastState=buttonState; // save button state as the last state
  }
}}}